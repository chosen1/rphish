P.register("cvfVersion",function(){return{version:"0.1.0.0-2018-09-03"}});
P.when("A","cvfFormDataGenerator","ready").register("cvf-account-switcher",function(h,l){function p(b,d){b.preventDefault();var e=l.retrieveFormData(b.target),g=e.inputData.serializeArray();g.push(c(b.target));h.ajax(window.location.protocol+"//"+window.location.host+e.requestPath,{method:"POST",params:g,success:d,error:a})}function c(a){a=b(a);var d=a.attr("name");d||(d=a.closest(".cvf-account-switcher-sign-out-link").attr("data-name"));var c=a.attr("value");c||(c=a.closest(".cvf-account-switcher-sign-out-link").attr("data-value"));
return{name:d,value:c}}function a(a,b,d){h.trigger(g.error,d)}function e(a){var d=/([^@\s]+)@([a-zA-Z0-9_-]+)(\.[a-zA-Z0-9._-]+)/ig.exec(a);if(null!==d){a=d[1];a=b.trim(a);var c=a.length;if(1!==c){for(var e=a.charAt(0),g=0;g<c-2;g++)e+="*";a=e+=a.charAt(c-1)}a+="@";e=d[2];e=b.trim(e);c=e.length;e=e.charAt(0);for(g=0;g<c-1;g++)e+="*";return a+e+d[3]}d=b.trim(a);a=d.length;if(!(4>=a)){c="";for(e=0;e<a-4;e++)c+="*";d=c+d.substr(a-4,a-1)}return d}function d(){0===b(".cvf-account-switcher-check-mark:visible").length&&
(b(".cvf-account-switcher-check-mark-area").remove(),b(".cvf-account-switcher-profile-details").toggleClass("cvf-account-switcher-profile-details cvf-account-switcher-profile-details-after-account-removed"))}var b=h.$,g={success:"cvf:account_switcher:success",error:"cvf:account_switcher:error"};(function(){var a=b("#ap-account-switcher-container")[0],c=window.MutationObserver||window.WebKitMutationObserver;if(void 0!==a&&void 0!==c){var e=new c(function(a){for(var b=0;b<a.length;b++)if(null!==a[b].addedNodes){d();
e.disconnect();break}});e.observe(a,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}})();(function(){b(".cvf-account-switcher-sign-out-link").live("click",function(a){p(a,function(c){if(c.redirectUrl)window.location=c.redirectUrl,h.trigger("cvf:account_switcher","redirectOnSignOut");else if(c.succeeded){var k="."+b(a.target).attr("class").match(/cvf-account-switcher-account-group-\w+/g)[0];b(k+"-hide").hide();b(k+"-name").text(b("#cvf-account-switcher-sign-out-replace-text").text());b(k+
"-claim").text(e(b(k+"-claim").text()));b(k+"-image").replaceWith(b("<div />").append(b("#cvf-account-switcher-sign-out-replace-image").clone().removeClass("cvf-hidden")).html());b(k+"-button").removeClass("cvf-widget-btn-val cvf-widget-btn-verify-account-switcher");c=c.switchedAccountId;void 0!==c&&b(".cvf-account-switcher-account-group-"+c+"-check-mark").show();d()}else h.trigger(g.error,c)})})})()});
P.when("A","cvfVersion","cvfFormDataGenerator","ready").register("cvf",function(h,l,p){function c(a){function c(a){"string"===typeof v.options.widgetMetricsScope&&"function"===typeof window.uet&&window.uex("ld",v.options.widgetMetricsScope,{wb:1});v.options.spinnerTarget&&v.options.spinnerTarget.hide();a.hasOwnProperty("error")?h.trigger(t.error,a.error):a.redirectUrl?window.location=a.redirectUrl:a.redirect?(h.trigger(t.success,a.token,a.status,a.redirect),v.options.autoDestroy?v.destroy():(e(".cvf-widget-alert").hide(),
a.status?e(".cvf-widget-status-success").show():e(".cvf-widget-status-error").show(),f()),h.trigger("cvf:verification:complete",a.status),B.find(".cvf-widget-btn").unbind("click",k),B.find(".cvf-widget-btn-val").unbind("click",k),h.off(t.success),h.off(t.error)):(B.html(a.replace(/<form/g,"<div").replace(/<\/form/g,"</div")),w())}function k(a,b){a.preventDefault();e(".cvf-widget-alert").hide();v.options.spinnerTarget&&v.options.spinnerTarget.show();var d=p.retrieveFormData(a.target),f=d.inputData.serializeArray();
b&&f.push(p.getNameValue(a.target));h.ajax(q+d.requestPath,{method:"POST",params:f,success:c,error:u})}function l(a){13===a.keyCode&&k(a)}function w(){B.find(".cvf-widget-btn").click(function(a){k(a,!1)});B.find(".cvf-widget-btn-val").click(function(a){k(a,!0)});B.find('input[name="code"]').focus().keypress(l)}function r(a){return function(b,d,c){"timeout"!==d||3<=z?h.trigger(t.error,c):h.delay(a,10*z++)}}function u(a,b,d){v.options.spinnerTarget&&v.options.spinnerTarget.hide();h.trigger(t.error,
d)}function f(){e.each(B.find("input"),function(a,b){var d=e(b);d.attr("disabled","disabled");d.hasClass("a-input-text")?d.addClass("a-form-disabled"):d.hasClass("a-button-input")?d.closest(".a-button").addClass("a-button-disabled"):d.closest(".a-input-text-wrapper").length&&d.closest(".a-input-text-wrapper").addClass("a-form-disabled")});e.each(B.find("a"),function(a,b){var d=e(b);d.hasClass("cvf-widget-link-disable-target")&&d.addClass("cvf-link-disabled")})}var v=this;b++;var t={success:"cvf:"+
b+":success",error:"cvf:"+b+":error"};v.options={};e.extend(v.options,d,a);(function(a){if(1!==e(a.target).length)throw Error("The CVF widget requires a unique element.");if(!e.isFunction(a.onSuccess))throw Error("The CVF widget requires a success callback function.");if(!e.isFunction(a.onError))throw Error("The CVF widget requires an error callback function.");})(v.options);var q=v.options.server,B=e(v.options.target);h.on(t.success,v.options.onSuccess);h.on(t.error,v.options.onError);v.start=function(){if(0===
e.trim(v.options.requestToken).length)throw Error("The CVF widget requires a request token.");var a;a=v.options.requestToken;var b=v.options.requestArbToken;a=0===e.trim(b).length?q+"/ap/cvf/request.embed?requestToken="+a:q+"/ap/cvf/request.embed?arb="+b;"string"===typeof v.options.widgetMetricsScope&&"function"===typeof window.uet&&window.uet("bb",v.options.widgetMetricsScope,{wb:1});h.ajax(a,{method:"GET",params:g,success:c,error:r(v.start)})};v.destroy=function(){B.html("")};w();var z=0;v.options.autoStart&&
v.start()}function a(a){return new c(a)}var e=h.$,d={server:"",target:void 0,requestToken:void 0,requestArbToken:void 0,onSuccess:void 0,onError:void 0,spinnerTarget:void 0,autoStart:!0,autoDestroy:!0,widgetMetricsScope:void 0},b=0,g=[{name:"CVFVersion",value:l.version},{name:"AUIVersion",value:P.AUI_BUILD_DATE}];h.on("cvf:verification:request",function(b){var d=e("#"+b),c=d.data("token"),g=d.data("spinnerId"),g=e("#"+g);a({target:d,spinnerTarget:g,requestToken:c,onSuccess:function(a,d,c){h.trigger("cvf:verification:complete:"+
b,a,d,c)},onError:function(a){h.trigger("cvf:verification:error:"+b,a)},autoStart:!0,autoDestroy:!1})});return{create:a}});
P.when("A","cvf","ready").execute(function(h,l){var p=h.$;p(document).ready(function(){function c(a,b,d){window.location=d;console.log("Client Side: "+a)}function a(a){console.log(a)}var e=p(".cvf-widget-spinner"),d=p("#cvf-widget-content");if(1===d.length){var b=p('[name="requestToken"]').first().attr("value");l.create({target:d,spinnerTarget:e,requestToken:b,onSuccess:c,onError:a,autoStart:!1})}})});
P.when("A").execute(function(h){h.declarative("auth-popup","click",function(h){var p=h.data;h=h.$target.closest("a")[0];(p=window.open(h.href,h.target,p.windowOptions))&&p.focus()})});P.when("A","cvfFormDataGenerator","ready").execute(function(h,l){});
P.when("A","cvfFormDataGenerator","ready").execute(function(h,l){var p=h.$;p(".cvf-widget-btn-val").click(function(c){var a=p(c.target).closest(".cvf-widget-form");c=l.getNameValue(p(c.target));a.append('<input type="hidden" name="'+c.name+'" value="'+c.value+'">').submit()})});
P.when("A","ready").register("cvfFormDataGenerator",function(h){var l=h.$;return{retrieveFormData:function(h){h=l(h).closest(".cvf-widget-form");return{requestPath:h.data("use-only-form-action")?h.attr("action"):"/ap/cvf/"+h.attr("action")+".embed",inputData:h.find(".cvf-widget-input,.cvf-widget-hidden-fields,.cvf-widget-input :input"),form:h}},getNameValue:function(h){h=l(h);var c=h.attr("name");c||(c=h.closest(".cvf-widget-btn-val").attr("data-name"));var a=h.attr("value");a||(a=h.closest(".cvf-widget-btn-val").attr("data-value"));
return{name:c,value:a}}}});P.when("A","ready").register("codeResendTimer",function(h){function l(l,c,a){var e=(new Date).getTime(),d=setInterval(function(){var b=(new Date).getTime()-e,b=l-b;if(0>=b)clearInterval(d),h.$("#timer").html(a);else{var b=Math.floor(b/1E3),g=c.split(" +timeleft+ "),b=g[0].split('"').join("")+b+g[1].split('"').join("");h.$("#timer").html(b)}},100)}return{createTimer:function(h,c,a){return new l(h,c,a)}}});